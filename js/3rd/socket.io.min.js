var io="undefined"===typeof module?{}:module.exports;(function(){(function(e,t){var n=e;n.version="0.9.16";n.protocol=1;n.transports=[];n.j=[];n.sockets={};n.connect=function(e,o){var i=n.util.parseUri(e),r,s;if(t&&t.location){i.protocol=i.protocol||t.location.protocol.slice(0,-1);i.host=i.host||(t.document?t.document.domain:t.location.hostname);i.port=i.port||t.location.port}r=n.util.uniqueUri(i);var a={host:i.host,secure:"https"==i.protocol,port:i.port||("https"==i.protocol?443:80),query:i.query||""};n.util.merge(a,o);if(a["force new connection"]||!n.sockets[r]){s=new n.Socket(a)}if(!a["force new connection"]&&s){n.sockets[r]=s}s=s||n.sockets[r];return s.of(i.path.length>1?i.path:"")}})("object"===typeof module?module.exports:this.io={},this);(function(e,t){var n=e.util={};var o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){var t=o.exec(e||""),n={},r=14;while(r--){n[i[r]]=t[r]||""}return n};n.uniqueUri=function(e){var n=e.protocol,o=e.host,i=e.port;if("document"in t){o=o||document.domain;i=i||(n=="https"&&document.location.protocol!=="https:"?443:document.location.port)}else{o=o||"localhost";if(!i&&n=="https"){i=443}}return(n||"http")+"://"+o+":"+(i||80)};n.query=function(e,t){var o=n.chunkQuery(e||""),i=[];n.merge(o,n.chunkQuery(t||""));for(var r in o){if(o.hasOwnProperty(r)){i.push(r+"="+o[r])}}return i.length?"?"+i.join("&"):""};n.chunkQuery=function(e){var t={},n=e.split("&"),o=0,i=n.length,r;for(;o<i;++o){r=n[o].split("=");if(r[0]){t[r[0]]=r[1]}}return t};var r=false;n.load=function(e){if("document"in t&&document.readyState==="complete"||r){return e()}n.on(t,"load",e,false)};n.on=function(e,t,n,o){if(e.attachEvent){e.attachEvent("on"+t,n)}else if(e.addEventListener){e.addEventListener(t,n,o)}};n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS){return new XDomainRequest}if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS)){return new XMLHttpRequest}if(!e){try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}return null};if("undefined"!=typeof window){n.load(function(){r=true})}n.defer=function(e){if(!n.ua.webkit||"undefined"!=typeof importScripts){return e()}n.load(function(){setTimeout(e,100)})};n.merge=function s(e,t,o,i){var r=i||[],s=typeof o=="undefined"?2:o,a;for(a in t){if(t.hasOwnProperty(a)&&n.indexOf(r,a)<0){if(typeof e[a]!=="object"||!s){e[a]=t[a];r.push(t[a])}else{n.merge(e[a],t[a],s-1,r)}}}return e};n.mixin=function(e,t){n.merge(e.prototype,t.prototype)};n.inherit=function(e,t){function n(){}n.prototype=t.prototype;e.prototype=new n};n.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};n.intersect=function(e,t){var o=[],i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(var s=0,a=r.length;s<a;s++){if(~n.indexOf(i,r[s]))o.push(r[s])}return o};n.indexOf=function(e,t,n){for(var o=e.length,n=n<0?n+o<0?0:n+o:n||0;n<o&&e[n]!==t;n++){}return o<=n?-1:n};n.toArray=function(e){var t=[];for(var n=0,o=e.length;n<o;n++)t.push(e[n]);return t};n.ua={};n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return false}return e.withCredentials!=undefined}();n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)})("undefined"!=typeof io?io:module.exports,this);(function(e,t){e.EventEmitter=n;function n(){}n.prototype.on=function(e,n){if(!this.$events){this.$events={}}if(!this.$events[e]){this.$events[e]=n}else if(t.util.isArray(this.$events[e])){this.$events[e].push(n)}else{this.$events[e]=[this.$events[e],n]}return this};n.prototype.addListener=n.prototype.on;n.prototype.once=function(e,t){var n=this;function o(){n.removeListener(e,o);t.apply(this,arguments)}o.listener=t;this.on(e,o);return this};n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var o=this.$events[e];if(t.util.isArray(o)){var i=-1;for(var r=0,s=o.length;r<s;r++){if(o[r]===n||o[r].listener&&o[r].listener===n){i=r;break}}if(i<0){return this}o.splice(i,1);if(!o.length){delete this.$events[e]}}else if(o===n||o.listener&&o.listener===n){delete this.$events[e]}}return this};n.prototype.removeAllListeners=function(e){if(e===undefined){this.$events={};return this}if(this.$events&&this.$events[e]){this.$events[e]=null}return this};n.prototype.listeners=function(e){if(!this.$events){this.$events={}}if(!this.$events[e]){this.$events[e]=[]}if(!t.util.isArray(this.$events[e])){this.$events[e]=[this.$events[e]]}return this.$events[e]};n.prototype.emit=function(e){if(!this.$events){return false}var n=this.$events[e];if(!n){return false}var o=Array.prototype.slice.call(arguments,1);if("function"==typeof n){n.apply(this,o)}else if(t.util.isArray(n)){var i=n.slice();for(var r=0,s=i.length;r<s;r++){i[r].apply(this,o)}}else{return false}return true}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,nativeJSON){"use strict";if(nativeJSON&&nativeJSON.parse){return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify}}var JSON=exports.JSON={};function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,o,i,r,s=gap,a,c=t[e];if(c instanceof Date){c=date(e)}if(typeof rep==="function"){c=rep.call(t,e,c)}switch(typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c){return"null"}gap+=indent;a=[];if(Object.prototype.toString.apply(c)==="[object Array]"){r=c.length;for(n=0;n<r;n+=1){a[n]=str(n,c)||"null"}i=a.length===0?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]";gap=s;return i}if(rep&&typeof rep==="object"){r=rep.length;for(n=0;n<r;n+=1){if(typeof rep[n]==="string"){o=rep[n];i=str(o,c);if(i){a.push(quote(o)+(gap?": ":":")+i)}}}}else{for(o in c){if(Object.prototype.hasOwnProperty.call(c,o)){i=str(o,c);if(i){a.push(quote(o)+(gap?": ":":")+i)}}}}i=a.length===0?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}";gap=s;return i}}JSON.stringify=function(e,t,n){var o;gap="";indent="";if(typeof n==="number"){for(o=0;o<n;o+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})};JSON.parse=function(text,reviver){var j;function walk(e,t){var n,o,i=e[t];if(i&&typeof i==="object"){for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){o=walk(i,n);if(o!==undefined){i[n]=o}else{delete i[n]}}}}return reviver.call(e,t,i)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}})("undefined"!=typeof io?io:module.exports,typeof JSON!=="undefined"?JSON:undefined);(function(e,t){var n=e.parser={};var o=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"];var i=n.reasons=["transport not supported","client not handshaken","unauthorized"];var r=n.advice=["reconnect"];var s=t.JSON,a=t.util.indexOf;n.encodePacket=function(e){var t=a(o,e.type),n=e.id||"",c=e.endpoint||"",f=e.ack,u=null;switch(e.type){case"error":var p=e.reason?a(i,e.reason):"",l=e.advice?a(r,e.advice):"";if(p!==""||l!=="")u=p+(l!==""?"+"+l:"");break;case"message":if(e.data!=="")u=e.data;break;case"event":var h={name:e.name};if(e.args&&e.args.length){h.args=e.args}u=s.stringify(h);break;case"json":u=s.stringify(e.data);break;case"connect":if(e.qs)u=e.qs;break;case"ack":u=e.ackId+(e.args&&e.args.length?"+"+s.stringify(e.args):"");break}var d=[t,n+(f=="data"?"+":""),c];if(u!==null&&u!==undefined)d.push(u);return d.join(":")};n.encodePayload=function(e){var t="";if(e.length==1)return e[0];for(var n=0,o=e.length;n<o;n++){var i=e[n];t+="�"+i.length+"�"+e[n]}return t};var c=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(c);if(!t)return{};var n=t[2]||"",e=t[5]||"",a={type:o[t[1]],endpoint:t[4]||""};if(n){a.id=n;if(t[3])a.ack="data";else a.ack=true}switch(a.type){case"error":var t=e.split("+");a.reason=i[t[0]]||"";a.advice=r[t[1]]||"";break;case"message":a.data=e||"";break;case"event":try{var f=s.parse(e);a.name=f.name;a.args=f.args}catch(u){}a.args=a.args||[];break;case"json":try{a.data=s.parse(e)}catch(u){}break;case"connect":a.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t){a.ackId=t[1];a.args=[];if(t[3]){try{a.args=t[3]?s.parse(t[3]):[]}catch(u){}}}break;case"disconnect":case"heartbeat":break}return a};n.decodePayload=function(e){if(e.charAt(0)=="�"){var t=[];for(var o=1,i="";o<e.length;o++){if(e.charAt(o)=="�"){t.push(n.decodePacket(e.substr(o+1).substr(0,i)));o+=Number(i)+1;i=""}else{i+=e.charAt(o)}}return t}else{return[n.decodePacket(e)]}}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(e,t){e.Transport=n;function n(e,t){this.socket=e;this.sessid=t}t.util.mixin(n,t.EventEmitter);n.prototype.heartbeats=function(){return true};n.prototype.onData=function(e){this.clearCloseTimeout();if(this.socket.connected||this.socket.connecting||this.socket.reconnecting){this.setCloseTimeout()}if(e!==""){var n=t.parser.decodePayload(e);if(n&&n.length){for(var o=0,i=n.length;o<i;o++){this.onPacket(n[o])}}}return this};n.prototype.onPacket=function(e){this.socket.setHeartbeatTimeout();if(e.type=="heartbeat"){return this.onHeartbeat()}if(e.type=="connect"&&e.endpoint==""){this.onConnect()}if(e.type=="error"&&e.advice=="reconnect"){this.isOpen=false}this.socket.onPacket(e);return this};n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}};n.prototype.onDisconnect=function(){if(this.isOpen)this.close();this.clearTimeouts();this.socket.onDisconnect();return this};n.prototype.onConnect=function(){this.socket.onConnect();return this};n.prototype.clearCloseTimeout=function(){if(this.closeTimeout){clearTimeout(this.closeTimeout);this.closeTimeout=null}};n.prototype.clearTimeouts=function(){this.clearCloseTimeout();if(this.reopenTimeout){clearTimeout(this.reopenTimeout)}};n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))};n.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})};n.prototype.onOpen=function(){this.isOpen=true;this.clearCloseTimeout();this.socket.onOpen()};n.prototype.onClose=function(){var e=this;this.isOpen=false;this.socket.onClose();this.onDisconnect()};n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid};n.prototype.ready=function(e,t){t.call(this)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(e,t,n){e.Socket=o;function o(e){this.options={port:80,secure:false,document:"document"in n?document:false,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":true,reconnect:true,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":false,"auto connect":true,"flash policy port":10843,manualFlush:false};t.util.merge(this.options,e);this.connected=false;this.open=false;this.connecting=false;this.reconnecting=false;this.namespaces={};this.buffer=[];this.doBuffer=false;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var o=this;t.util.on(n,"beforeunload",function(){o.disconnectSync()},false)}if(this.options["auto connect"]){this.connect()}}t.util.mixin(o,t.EventEmitter);o.prototype.of=function(e){if(!this.namespaces[e]){this.namespaces[e]=new t.SocketNamespace(this,e);if(e!==""){this.namespaces[e].packet({type:"connect"})}}return this.namespaces[e]};o.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces){if(this.namespaces.hasOwnProperty(t)){e=this.of(t);e.$emit.apply(e,arguments)}}};function i(){}o.prototype.handshake=function(e){var n=this,o=this.options;function r(t){if(t instanceof Error){n.connecting=false;n.onError(t.message)}else{e.apply(null,t.split(":"))}}var s=["http"+(o.secure?"s":"")+":/",o.host+":"+o.port,o.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var a=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src=s+"&jsonp="+t.j.length;a.parentNode.insertBefore(c,a);t.j.push(function(e){r(e);c.parentNode.removeChild(c)})}else{var f=t.util.request();f.open("GET",s,true);if(this.isXDomain()){f.withCredentials=true}f.onreadystatechange=function(){if(f.readyState==4){f.onreadystatechange=i;if(f.status==200){r(f.responseText)}else if(f.status==403){n.onError(f.responseText)}else{n.connecting=false;!n.reconnecting&&n.onError(f.responseText)}}};f.send(null)}};o.prototype.getTransport=function(e){var n=e||this.transports,o;for(var i=0,r;r=n[i];i++){if(t.Transport[r]&&t.Transport[r].check(this)&&(!this.isXDomain()||t.Transport[r].xdomainCheck(this))){return new t.Transport[r](this,this.sessionid)}}return null};o.prototype.connect=function(e){if(this.connecting){return this}var n=this;n.connecting=true;this.handshake(function(o,i,r,s){n.sessionid=o;n.closeTimeout=r*1e3;n.heartbeatTimeout=i*1e3;if(!n.transports)n.transports=n.origTransports=s?t.util.intersect(s.split(","),n.options.transports):n.options.transports;n.setHeartbeatTimeout();function a(e){if(n.transport)n.transport.clearTimeouts();n.transport=n.getTransport(e);if(!n.transport)return n.publish("connect_failed");n.transport.ready(n,function(){n.connecting=true;n.publish("connecting",n.transport.name);n.transport.open();if(n.options["connect timeout"]){n.connectTimeoutTimer=setTimeout(function(){if(!n.connected){n.connecting=false;if(n.options["try multiple transports"]){var e=n.transports;while(e.length>0&&e.splice(0,1)[0]!=n.transport.name){}if(e.length){a(e)}else{n.publish("connect_failed")}}}},n.options["connect timeout"])}})}a(n.transports);n.once("connect",function(){clearTimeout(n.connectTimeoutTimer);e&&typeof e=="function"&&e()})});return this};o.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);if(this.transport&&!this.transport.heartbeats())return;var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)};o.prototype.packet=function(e){if(this.connected&&!this.doBuffer){this.transport.packet(e)}else{this.buffer.push(e)}return this};o.prototype.setBuffer=function(e){this.doBuffer=e;if(!e&&this.connected&&this.buffer.length){if(!this.options["manualFlush"]){this.flushBuffer()}}};o.prototype.flushBuffer=function(){this.transport.payload(this.buffer);this.buffer=[]};o.prototype.disconnect=function(){if(this.connected||this.connecting){if(this.open){this.of("").packet({type:"disconnect"})}this.onDisconnect("booted")}return this};o.prototype.disconnectSync=function(){var e=t.util.request();var n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,false);e.send(null);this.onDisconnect("booted")};o.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e};o.prototype.onConnect=function(){if(!this.connected){this.connected=true;this.connecting=false;if(!this.doBuffer){this.setBuffer(false)}this.emit("connect")}};o.prototype.onOpen=function(){this.open=true};o.prototype.onClose=function(){this.open=false;clearTimeout(this.heartbeatTimeoutTimer)};o.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)};o.prototype.onError=function(e){if(e&&e.advice){if(e.advice==="reconnect"&&(this.connected||this.connecting)){this.disconnect();if(this.options.reconnect){this.reconnect()}}}this.publish("error",e&&e.reason?e.reason:e)};o.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=false;this.connecting=false;this.open=false;if(t||n){this.transport.close();this.transport.clearTimeouts();if(t){this.publish("disconnect",e);if("booted"!=e&&this.options.reconnect&&!this.reconnecting){this.reconnect()}}}};o.prototype.reconnect=function(){this.reconnecting=true;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var e=this,t=this.options["max reconnection attempts"],n=this.options["try multiple transports"],o=this.options["reconnection limit"];function i(){if(e.connected){for(var t in e.namespaces){if(e.namespaces.hasOwnProperty(t)&&""!==t){e.namespaces[t].packet({type:"connect"})}}e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}clearTimeout(e.reconnectionTimer);e.removeListener("connect_failed",r);e.removeListener("connect",r);e.reconnecting=false;delete e.reconnectionAttempts;delete e.reconnectionDelay;delete e.reconnectionTimer;delete e.redoTransports;e.options["try multiple transports"]=n}function r(){if(!e.reconnecting){return}if(e.connected){return i()}if(e.connecting&&e.reconnecting){return e.reconnectionTimer=setTimeout(r,1e3)}if(e.reconnectionAttempts++>=t){if(!e.redoTransports){e.on("connect_failed",r);e.options["try multiple transports"]=true;e.transports=e.origTransports;e.transport=e.getTransport();e.redoTransports=true;e.connect()}else{e.publish("reconnect_failed");i()}}else{if(e.reconnectionDelay<o){e.reconnectionDelay*=2}e.connect();e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts);e.reconnectionTimer=setTimeout(r,e.reconnectionDelay)}}this.options["try multiple transports"]=false;this.reconnectionTimer=setTimeout(r,this.reconnectionDelay);this.on("connect",r)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(e,t){e.SocketNamespace=n;function n(e,t){this.socket=e;this.name=t||"";this.flags={};this.json=new o(this,"json");this.ackPackets=0;this.acks={}}t.util.mixin(n,t.EventEmitter);n.prototype.$emit=t.EventEmitter.prototype.emit;n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};n.prototype.packet=function(e){e.endpoint=this.name;this.socket.packet(e);this.flags={};return this};n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};if("function"==typeof t){n.id=++this.ackPackets;n.ack=true;this.acks[n.id]=t}return this.packet(n)};n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],o={type:"event",name:e};if("function"==typeof n){o.id=++this.ackPackets;o.ack="data";this.acks[o.id]=n;t=t.slice(0,t.length-1)}o.args=t;return this.packet(o)};n.prototype.disconnect=function(){if(this.name===""){this.socket.disconnect()}else{this.packet({type:"disconnect"});this.$emit("disconnect")}return this};n.prototype.onPacket=function(e){var n=this;function o(){n.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":if(this.name===""){this.socket.onDisconnect(e.reason||"booted")}else{this.$emit("disconnect",e.reason)}break;case"message":case"json":var i=["message",e.data];if(e.ack=="data"){i.push(o)}else if(e.ack){this.packet({type:"ack",ackId:e.id})}this.$emit.apply(this,i);break;case"event":var i=[e.name].concat(e.args);if(e.ack=="data")i.push(o);this.$emit.apply(this,i);break;case"ack":if(this.acks[e.ackId]){this.acks[e.ackId].apply(this,e.args);delete this.acks[e.ackId]}break;case"error":if(e.advice){this.socket.onError(e)}else{if(e.reason=="unauthorized"){this.$emit("connect_failed",e.reason)}else{this.$emit("error",e.reason)}}break}};function o(e,t){this.namespace=e;this.name=t}o.prototype.send=function(){this.namespace.flags[this.name]=true;this.namespace.send.apply(this.namespace,arguments)};o.prototype.emit=function(){this.namespace.flags[this.name]=true;this.namespace.emit.apply(this.namespace,arguments)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(e,t,n){e.websocket=o;function o(e){t.Transport.apply(this,arguments)}t.util.inherit(o,t.Transport);o.prototype.name="websocket";o.prototype.open=function(){var e=t.util.query(this.socket.options.query),o=this,i;if(!i){i=n.MozWebSocket||n.WebSocket}this.websocket=new i(this.prepareUrl()+e);this.websocket.onopen=function(){o.onOpen();o.socket.setBuffer(false)};this.websocket.onmessage=function(e){o.onData(e.data)};this.websocket.onclose=function(){o.onClose();o.socket.setBuffer(true)};this.websocket.onerror=function(e){o.onError(e)};return this};if(t.util.ua.iDevice){o.prototype.send=function(e){var t=this;setTimeout(function(){t.websocket.send(e)},0);return this}}else{o.prototype.send=function(e){this.websocket.send(e);return this}}o.prototype.payload=function(e){for(var t=0,n=e.length;t<n;t++){this.packet(e[t])}return this};o.prototype.close=function(){this.websocket.close();return this};o.prototype.onError=function(e){this.socket.onError(e)};o.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};o.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n};o.xdomainCheck=function(){return true};t.transports.push("websocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(e,t){e.flashsocket=n;function n(){t.Transport.websocket.apply(this,arguments)}t.util.inherit(n,t.Transport.websocket);n.prototype.name="flashsocket";n.prototype.open=function(){var e=this,n=arguments;WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,n)});return this};n.prototype.send=function(){var e=this,n=arguments;WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,n)});return this};n.prototype.close=function(){WebSocket.__tasks.length=0;t.Transport.websocket.prototype.close.call(this);return this};n.prototype.ready=function(e,o){function i(){var t=e.options,i=t["flash policy port"],s=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];if(!n.loaded){if(typeof WEB_SOCKET_SWF_LOCATION==="undefined"){WEB_SOCKET_SWF_LOCATION=s.join("/")}if(i!==843){WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+i)}WebSocket.__initialize();n.loaded=true}o.call(r)}var r=this;if(document.body)return i();t.util.load(i)};n.check=function(){if(typeof WebSocket=="undefined"||!("__initialize"in WebSocket)||!swfobject)return false;return swfobject.getFlashPlayerVersion().major>=10};n.xdomainCheck=function(){return true};if(typeof window!="undefined"){WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=true}t.transports.push("flashsocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window){var swfobject=function(){var e="undefined",t="object",n="Shockwave Flash",o="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",r="SWFObjectExprInst",s="onreadystatechange",a=window,c=document,f=navigator,u=false,p=[W],l=[],h=[],d=[],y,m,v,g,k=false,b=false,w,S,T=true,_=function(){var r=typeof c.getElementById!=e&&typeof c.getElementsByTagName!=e&&typeof c.createElement!=e,s=f.userAgent.toLowerCase(),p=f.platform.toLowerCase(),l=p?/win/.test(p):/win/.test(s),h=p?/mac/.test(p):/mac/.test(s),d=/webkit/.test(s)?parseFloat(s.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,y=!+"1",m=[0,0,0],v=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t){v=f.plugins[n].description;if(v&&!(typeof f.mimeTypes!=e&&f.mimeTypes[i]&&!f.mimeTypes[i].enabledPlugin)){u=true;y=false;v=v.replace(/^.*\s+(\S+\s+\S+$)/,"$1");m[0]=parseInt(v.replace(/^(.*)\..*$/,"$1"),10);m[1]=parseInt(v.replace(/^.*\.(.*)\s.*$/,"$1"),10);m[2]=/[a-zA-Z]/.test(v)?parseInt(v.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof a[["Active"].concat("Object").join("X")]!=e){try{var g=new(window[["Active"].concat("Object").join("X")])(o);if(g){v=g.GetVariable("$version");if(v){y=true;v=v.split(" ")[1].split(",");m=[parseInt(v[0],10),parseInt(v[1],10),parseInt(v[2],10)]}}}catch(k){}}}return{w3:r,pv:m,wk:d,ie:y,win:l,mac:h}}(),E=function(){if(!_.w3){return}if(typeof c.readyState!=e&&c.readyState=="complete"||typeof c.readyState==e&&(c.getElementsByTagName("body")[0]||c.body)){C()}if(!k){if(typeof c.addEventListener!=e){c.addEventListener("DOMContentLoaded",C,false)}if(_.ie&&_.win){c.attachEvent(s,function(){if(c.readyState=="complete"){c.detachEvent(s,arguments.callee);C()}});if(a==top){(function(){if(k){return}try{c.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()})()}}if(_.wk){(function(){if(k){return}if(!/loaded|complete/.test(c.readyState)){setTimeout(arguments.callee,0);return}C()})()}O(C)}}();function C(){if(k){return}try{var e=c.getElementsByTagName("body")[0].appendChild(X("span"));e.parentNode.removeChild(e)}catch(t){return}k=true;var n=p.length;for(var o=0;o<n;o++){p[o]()}}function x(e){if(k){e()}else{p[p.length]=e}}function O(t){if(typeof a.addEventListener!=e){a.addEventListener("load",t,false)}else{if(typeof c.addEventListener!=e){c.addEventListener("load",t,false)}else{if(typeof a.attachEvent!=e){M(a,"onload",t)}else{if(typeof a.onload=="function"){var n=a.onload;a.onload=function(){n();t()}}else{a.onload=t}}}}}function W(){if(u){N()}else{I()}}function N(){var n=c.getElementsByTagName("body")[0];var o=X(t);o.setAttribute("type",i);var r=n.appendChild(o);if(r){var s=0;(function(){if(typeof r.GetVariable!=e){var t=r.GetVariable("$version");if(t){t=t.split(" ")[1].split(",");_.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)]}}else{if(s<10){s++;setTimeout(arguments.callee,10);return}}n.removeChild(o);r=null;I()})()}else{I()}}function I(){var t=l.length;if(t>0){for(var n=0;n<t;n++){var o=l[n].id;var i=l[n].callbackFn;var r={success:false,id:o};if(_.pv[0]>0){var s=R(o);if(s){if(H(l[n].swfVersion)&&!(_.wk&&_.wk<312)){J(o,true);if(i){r.success=true;r.ref=A(o);i(r)}}else{if(l[n].expressInstall&&j()){var a={};a.data=l[n].expressInstall;a.width=s.getAttribute("width")||"0";a.height=s.getAttribute("height")||"0";if(s.getAttribute("class")){a.styleclass=s.getAttribute("class")}if(s.getAttribute("align")){a.align=s.getAttribute("align")}var c={};var f=s.getElementsByTagName("param");var u=f.length;for(var p=0;p<u;p++){if(f[p].getAttribute("name").toLowerCase()!="movie"){c[f[p].getAttribute("name")]=f[p].getAttribute("value")}}L(a,c,o,i)}else{D(s);if(i){i(r)}}}}}else{J(o,true);if(i){var h=A(o);if(h&&typeof h.SetVariable!=e){r.success=true;r.ref=h}i(r)}}}}}function A(n){var o=null;var i=R(n);if(i&&i.nodeName=="OBJECT"){if(typeof i.SetVariable!=e){o=i}else{var r=i.getElementsByTagName(t)[0];if(r){o=r}}}return o}function j(){return!b&&H("6.0.65")&&(_.win||_.mac)&&!(_.wk&&_.wk<312)}function L(t,n,o,i){b=true;v=i||null;g={success:false,id:o};var s=R(o);if(s){if(s.nodeName=="OBJECT"){y=B(s);m=null}else{y=s;m=o}t.id=r;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310){t.width="310"}if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137){t.height="137"}c.title=c.title.slice(0,47)+" - Flash Player Installation";var f=_.ie&&_.win?["Active"].concat("").join("X"):"PlugIn",u="MMredirectURL="+a.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+c.title;if(typeof n.flashvars!=e){n.flashvars+="&"+u}else{n.flashvars=u}if(_.ie&&_.win&&s.readyState!=4){var p=X("div");o+="SWFObjectNew";p.setAttribute("id",o);s.parentNode.insertBefore(p,s);s.style.display="none";(function(){if(s.readyState==4){s.parentNode.removeChild(s)}else{setTimeout(arguments.callee,10)}})()}$(t,n,o)}}function D(e){if(_.ie&&_.win&&e.readyState!=4){var t=X("div");e.parentNode.insertBefore(t,e);t.parentNode.replaceChild(B(e),t);e.style.display="none";(function(){if(e.readyState==4){e.parentNode.removeChild(e)}else{setTimeout(arguments.callee,10)}})()}else{e.parentNode.replaceChild(B(e),e)}}function B(e){var n=X("div");if(_.win&&_.ie){n.innerHTML=e.innerHTML}else{var o=e.getElementsByTagName(t)[0];if(o){var i=o.childNodes;if(i){var r=i.length;for(var s=0;s<r;s++){if(!(i[s].nodeType==1&&i[s].nodeName=="PARAM")&&!(i[s].nodeType==8)){n.appendChild(i[s].cloneNode(true))}}}}}return n}function $(n,o,r){var s,a=R(r);if(_.wk&&_.wk<312){return s}if(a){if(typeof n.id==e){n.id=r}if(_.ie&&_.win){var c="";for(var f in n){if(n[f]!=Object.prototype[f]){if(f.toLowerCase()=="data"){o.movie=n[f]}else{if(f.toLowerCase()=="styleclass"){c+=' class="'+n[f]+'"'}else{if(f.toLowerCase()!="classid"){c+=" "+f+'="'+n[f]+'"'}}}}}var u="";for(var p in o){if(o[p]!=Object.prototype[p]){u+='<param name="'+p+'" value="'+o[p]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+c+">"+u+"</object>";h[h.length]=n.id;s=R(n.id)}else{var l=X(t);l.setAttribute("type",i);for(var d in n){if(n[d]!=Object.prototype[d]){if(d.toLowerCase()=="styleclass"){l.setAttribute("class",n[d])}else{if(d.toLowerCase()!="classid"){l.setAttribute(d,n[d])}}}}for(var y in o){if(o[y]!=Object.prototype[y]&&y.toLowerCase()!="movie"){P(l,y,o[y])}}a.parentNode.replaceChild(l,a);s=l}}return s}function P(e,t,n){var o=X("param");o.setAttribute("name",t);o.setAttribute("value",n);e.appendChild(o)}function q(e){var t=R(e);if(t&&t.nodeName=="OBJECT"){if(_.ie&&_.win){t.style.display="none";(function(){if(t.readyState==4){F(e)}else{setTimeout(arguments.callee,10)}})()}else{t.parentNode.removeChild(t)}}}function F(e){var t=R(e);if(t){for(var n in t){if(typeof t[n]=="function"){t[n]=null}}t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=c.getElementById(e)}catch(n){}return t}function X(e){return c.createElement(e)}function M(e,t,n){e.attachEvent(t,n);d[d.length]=[e,t,n]}function H(e){var t=_.pv,n=e.split(".");n[0]=parseInt(n[0],10);n[1]=parseInt(n[1],10)||0;n[2]=parseInt(n[2],10)||0;return t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?true:false}function U(n,o,i,r){if(_.ie&&_.mac){return}var s=c.getElementsByTagName("head")[0];if(!s){return}var a=i&&typeof i=="string"?i:"screen";if(r){w=null;S=null}if(!w||S!=a){var f=X("style");f.setAttribute("type","text/css");f.setAttribute("media",a);w=s.appendChild(f);if(_.ie&&_.win&&typeof c.styleSheets!=e&&c.styleSheets.length>0){w=c.styleSheets[c.styleSheets.length-1]}S=a}if(_.ie&&_.win){if(w&&typeof w.addRule==t){w.addRule(n,o)}}else{if(w&&typeof c.createTextNode!=e){w.appendChild(c.createTextNode(n+" {"+o+"}"))}}}function J(e,t){if(!T){return}var n=t?"visible":"hidden";if(k&&R(e)){R(e).style.visibility=n}else{U("#"+e,"visibility:"+n)
}}function G(t){var n=/[\\\"<>\.;]/;var o=n.exec(t)!=null;return o&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var z=function(){if(_.ie&&_.win){window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++){d[t][0].detachEvent(d[t][1],d[t][2])}var n=h.length;for(var o=0;o<n;o++){q(h[o])}for(var i in _){_[i]=null}_=null;for(var r in swfobject){swfobject[r]=null}swfobject=null})}}();return{registerObject:function(e,t,n,o){if(_.w3&&e&&t){var i={};i.id=e;i.swfVersion=t;i.expressInstall=n;i.callbackFn=o;l[l.length]=i;J(e,false)}else{if(o){o({success:false,id:e})}}},getObjectById:function(e){if(_.w3){return A(e)}},embedSWF:function(n,o,i,r,s,a,c,f,u,p){var l={success:false,id:o};if(_.w3&&!(_.wk&&_.wk<312)&&n&&o&&i&&r&&s){J(o,false);x(function(){i+="";r+="";var h={};if(u&&typeof u===t){for(var d in u){h[d]=u[d]}}h.data=n;h.width=i;h.height=r;var y={};if(f&&typeof f===t){for(var m in f){y[m]=f[m]}}if(c&&typeof c===t){for(var v in c){if(typeof y.flashvars!=e){y.flashvars+="&"+v+"="+c[v]}else{y.flashvars=v+"="+c[v]}}}if(H(s)){var g=$(h,y,o);if(h.id==o){J(o,true)}l.success=true;l.ref=g}else{if(a&&j()){h.data=a;L(h,y,o,p);return}else{J(o,true)}}if(p){p(l)}})}else{if(p){p(l)}}},switchOffAutoHideShow:function(){T=false},ua:_,getFlashPlayerVersion:function(){return{major:_.pv[0],minor:_.pv[1],release:_.pv[2]}},hasFlashPlayerVersion:H,createSWF:function(e,t,n){if(_.w3){return $(e,t,n)}else{return undefined}},showExpressInstall:function(e,t,n,o){if(_.w3&&j()){L(e,t,n,o)}},removeSWF:function(e){if(_.w3){q(e)}},createCSS:function(e,t,n,o){if(_.w3){U(e,t,n,o)}},addDomLoadEvent:x,addLoadEvent:O,getQueryParamValue:function(e){var t=c.location.search||c.location.hash;if(t){if(/\?/.test(t)){t=t.split("?")[1]}if(e==null){return G(t)}var n=t.split("&");for(var o=0;o<n.length;o++){if(n[o].substring(0,n[o].indexOf("="))==e){return G(n[o].substring(n[o].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(b){var e=R(r);if(e&&y){e.parentNode.replaceChild(y,e);if(m){J(m,true);if(_.ie&&_.win){y.style.display="block"}}if(v){v(g)}}b=false}}}}()}(function(){if("undefined"==typeof window||window.WebSocket)return;var e=window.console;if(!e||!e.log||!e.error){e={log:function(){},error:function(){}}}if(!swfobject.hasFlashPlayerVersion("10.0.0")){e.error("Flash Player >= 10.0.0 is required.");return}if(location.protocol=="file:"){e.error("WARNING: web-socket-js doesn't work in file:///... URL "+"unless you set Flash Security Settings properly. "+"Open the page via Web server i.e. http://...")}WebSocket=function(e,t,n,o,i){var r=this;r.__id=WebSocket.__nextId++;WebSocket.__instances[r.__id]=r;r.readyState=WebSocket.CONNECTING;r.bufferedAmount=0;r.__events={};if(!t){t=[]}else if(typeof t=="string"){t=[t]}setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(r.__id,e,t,n||null,o||0,i||null)})},0)};WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING){throw"INVALID_STATE_ERR: Web Socket connection has not been established"}var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));if(t<0){return true}else{this.bufferedAmount+=t;return false}};WebSocket.prototype.close=function(){if(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING){return}this.readyState=WebSocket.CLOSING;WebSocket.__flash.close(this.__id)};WebSocket.prototype.addEventListener=function(e,t,n){if(!(e in this.__events)){this.__events[e]=[]}this.__events[e].push(t)};WebSocket.prototype.removeEventListener=function(e,t,n){if(!(e in this.__events))return;var o=this.__events[e];for(var i=o.length-1;i>=0;--i){if(o[i]===t){o.splice(i,1);break}}};WebSocket.prototype.dispatchEvent=function(e){var t=this.__events[e.type]||[];for(var n=0;n<t.length;++n){t[n](e)}var o=this["on"+e.type];if(o)o(e)};WebSocket.prototype.__handleEvent=function(e){if("readyState"in e){this.readyState=e.readyState}if("protocol"in e){this.protocol=e.protocol}var t;if(e.type=="open"||e.type=="error"){t=this.__createSimpleEvent(e.type)}else if(e.type=="close"){t=this.__createSimpleEvent("close")}else if(e.type=="message"){var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}else{throw"unknown event type: "+e.type}this.dispatchEvent(t)};WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");t.initEvent(e,false,false);return t}else{return{type:e,bubbles:false,cancelable:false}}};WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");n.initMessageEvent("message",false,false,t,null,null,window,null);return n}else{return{type:e,data:t,bubbles:false,cancelable:false}}};WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__flash=null;WebSocket.__instances={};WebSocket.__tasks=[];WebSocket.__nextId=0;WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})};WebSocket.__initialize=function(){if(WebSocket.__flash)return;if(WebSocket.__swfLocation){window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation}if(!window.WEB_SOCKET_SWF_LOCATION){e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var t=document.createElement("div");t.id="webSocketContainer";t.style.position="absolute";if(WebSocket.__isFlashLite()){t.style.left="0px";t.style.top="0px"}else{t.style.left="-100px";t.style.top="-100px"}var n=document.createElement("div");n.id="webSocketFlash";t.appendChild(n);document.body.appendChild(t);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:true,swliveconnect:true,allowScriptAccess:"always"},null,function(t){if(!t.success){e.error("[WebSocket] swfobject.embedSWF failed")}})};WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e){WebSocket.__tasks[e]()}WebSocket.__tasks=[]},0)};WebSocket.__onFlashEvent=function(){setTimeout(function(){try{var t=WebSocket.__flash.receiveEvents();for(var n=0;n<t.length;++n){WebSocket.__instances[t[n].webSocketId].__handleEvent(t[n])}}catch(o){e.error(o)}},0);return true};WebSocket.__log=function(t){e.log(decodeURIComponent(t))};WebSocket.__error=function(t){e.error(decodeURIComponent(t))};WebSocket.__addTask=function(e){if(WebSocket.__flash){e()}else{WebSocket.__tasks.push(e)}};WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes){return false}var e=window.navigator.mimeTypes["application/x-shockwave-flash"];if(!e||!e.enabledPlugin||!e.enabledPlugin.filename){return false}return e.enabledPlugin.filename.match(/flashlite/i)?true:false};if(!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION){if(window.addEventListener){window.addEventListener("load",function(){WebSocket.__initialize()},false)}else{window.attachEvent("onload",function(){WebSocket.__initialize()})}}})();(function(e,t,n){e.XHR=o;function o(e){if(!e)return;t.Transport.apply(this,arguments);this.sendBuffer=[]}t.util.inherit(o,t.Transport);o.prototype.open=function(){this.socket.setBuffer(false);this.onOpen();this.get();this.setCloseTimeout();return this};o.prototype.payload=function(e){var n=[];for(var o=0,i=e.length;o<i;o++){n.push(t.parser.encodePacket(e[o]))}this.send(t.parser.encodePayload(n))};o.prototype.send=function(e){this.post(e);return this};function i(){}o.prototype.post=function(e){var t=this;this.socket.setBuffer(true);function o(){if(this.readyState==4){this.onreadystatechange=i;t.posting=false;if(this.status==200){t.socket.setBuffer(false)}else{t.onClose()}}}function r(){this.onload=i;t.socket.setBuffer(false)}this.sendXHR=this.request("POST");if(n.XDomainRequest&&this.sendXHR instanceof XDomainRequest){this.sendXHR.onload=this.sendXHR.onerror=r}else{this.sendXHR.onreadystatechange=o}this.sendXHR.send(e)};o.prototype.close=function(){this.onClose();return this};o.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),o=t.util.query(this.socket.options.query,"t="+ +new Date);n.open(e||"GET",this.prepareUrl()+o,true);if(e=="POST"){try{if(n.setRequestHeader){n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}else{n.contentType="text/plain"}}catch(i){}}return n};o.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};o.check=function(e,o){try{var i=t.util.request(o),r=n.XDomainRequest&&i instanceof XDomainRequest,s=e&&e.options&&e.options.secure?"https:":"http:",a=n.location&&s!=n.location.protocol;if(i&&!(r&&a)){return true}}catch(c){}return false};o.xdomainCheck=function(e){return o.check(e,true)}})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(e,t,n){e["xhr-polling"]=o;function o(){t.Transport.XHR.apply(this,arguments)}t.util.inherit(o,t.Transport.XHR);t.util.merge(o,t.Transport.XHR);o.prototype.name="xhr-polling";o.prototype.heartbeats=function(){return false};o.prototype.open=function(){var e=this;t.Transport.XHR.prototype.open.call(e);return false};function i(){}o.prototype.get=function(){if(!this.isOpen)return;var e=this;function t(){if(this.readyState==4){this.onreadystatechange=i;if(this.status==200){e.onData(this.responseText);e.get()}else{e.onClose()}}}function o(){this.onload=i;this.onerror=i;e.retryCounter=1;e.onData(this.responseText);e.get()}function r(){e.retryCounter++;if(!e.retryCounter||e.retryCounter>3){e.onClose()}else{e.get()}}this.xhr=this.request();if(n.XDomainRequest&&this.xhr instanceof XDomainRequest){this.xhr.onload=o;this.xhr.onerror=r}else{this.xhr.onreadystatechange=t}this.xhr.send(null)};o.prototype.onClose=function(){t.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}};o.prototype.ready=function(e,n){var o=this;t.util.defer(function(){n.call(o)})};t.transports.push("xhr-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(e,t,n){var o=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=i;function i(e){t.Transport["xhr-polling"].apply(this,arguments);this.index=t.j.length;var n=this;t.j.push(function(e){n._(e)})}t.util.inherit(i,t.Transport["xhr-polling"]);i.prototype.name="jsonp-polling";i.prototype.post=function(e){var n=this,o=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var i=document.createElement("form"),r=document.createElement("textarea"),s=this.iframeId="socketio_iframe_"+this.index,a;i.className="socketio";i.style.position="absolute";i.style.top="0px";i.style.left="0px";i.style.display="none";i.target=s;i.method="POST";i.setAttribute("accept-charset","utf-8");r.name="d";i.appendChild(r);document.body.appendChild(i);this.form=i;this.area=r}this.form.action=this.prepareUrl()+o;function c(){f();n.socket.setBuffer(false)}function f(){if(n.iframe){n.form.removeChild(n.iframe)}try{a=document.createElement('<iframe name="'+n.iframeId+'">')}catch(e){a=document.createElement("iframe");a.name=n.iframeId}a.id=n.iframeId;n.form.appendChild(a);n.iframe=a}f();this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(u){}if(this.iframe.attachEvent){a.onreadystatechange=function(){if(n.iframe.readyState=="complete"){c()}}}else{this.iframe.onload=c}this.socket.setBuffer(true)};i.prototype.get=function(){var e=this,n=document.createElement("script"),i=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}n.async=true;n.src=this.prepareUrl()+i;n.onerror=function(){e.onClose()};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r);this.script=n;if(o){setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e);document.body.removeChild(e)},100)}};i.prototype._=function(e){this.onData(e);if(this.isOpen){this.get()}return this};i.prototype.ready=function(e,n){var i=this;if(!o)return n.call(this);t.util.load(function(){n.call(i)})};i.check=function(){return"document"in n};i.xdomainCheck=function(){return true};t.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);if(typeof define==="function"&&define.amd){define([],function(){return io})}})();